---

- name: Initialise
  hosts: webservers
  become: true
  remote_user: ansible
  gather_facts: yes
  roles:
    - role: init
  tags: [init]

#- name: Deploy webapp
#  hosts: webservers
##  become: true
 # remote_user: ansible
 # gather_facts: yes
 ## roles:
  #  - role: webapp
  #tags: [webapp]

- name: Deploy the processor
  hosts: webservers
  become: true
  remote_user: ansible
  gather_facts: yes
  roles:
    - role: processor
  tags: [processor]
    
- name: Deploy docker compose cluster
  hosts: webservers
  become: true
  remote_user: ansible
  gather_facts: yes
  roles:
    - role: docker
  tags: [docker]


#- name: Start the service
#  hosts: webservers
#  become: true
#  remote_user: ansible
#  gather_facts: yes
#  roles:
#   - role: startup
#  tags: [start]