---

- name: Initialise
  hosts: webservers
  become: true
  remote_user: ansible
  gather_facts: yes
  roles:
    - role: init
  tags: [init]

- name: Deploy docker compose cluster
  hosts: webservers
  become: true
  remote_user: ansible
  gather_facts: yes
  roles:
    - role: docker
  tags: [docker]


- name: Deploy the alerthandler
  hosts: webservers
  become: true
  remote_user: ansible
  gather_facts: yes
  roles:
    - role: alerthandler
  tags: [alerthandler]


#### Comment this out if you dont want to autostart the service ####
#### To manually start, ssh ansible@your.server and run docker compose up ####

#- name: Start the service
#  hosts: webservers
#  become: true
#  remote_user: ansible
#  gather_facts: yes
#  roles:
#   - role: startup
#  tags: [start]
